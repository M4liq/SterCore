@model leave_management.Models.Step2WorkTimeScheduleVM

@{
    ViewData["Title"] = "Harmonogram";
}

<h1>Harmonogram</h1>

<hr />
<div class="row">
    <div class="col-md-12">
        <form asp-action="Step2">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            <div id="Schedule"></div>


            <div class="form-group">
                <input type="submit" value="Zapisz harmonogram" class="btn btn-success btn-block" />
            </div>
        </form>
    </div>
</div>

<div>
    <a class="btn btn-primary" asp-action="Index"><i class="fa fa-arrow-alt-circle-left"></i> Powrót do podsumowania</a>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
    <!-- Essential JS 2 Scheduler's dependent scripts -->
    @*<script src="~/lib/scheduler/js/ej2-base.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-data.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-inputs.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-buttons.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-dropdowns.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-compression.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-file-utils.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-splitbuttons.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-lists.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-popups.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-navigations.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-calendars.min.js" type="text/javascript"></script>
    <script src="~/lib/scheduler/js/ej2-excel-export.min.js" type="text/javascript"></script>*@
    <!-- Essential JS 2 Scheduler's global script -->
    @*<script src="~/lib/scheduler/js/ej2-schedule.min.js" type="text/javascript"></script>*@
    <!-- Essential JS 2 all script -->
    <script src="~/lib/scheduler/js/ej2/dist/ej2.min.js" type="text/javascript"></script>


    <script>
        ej.base.setCulture('pl');
        var ajax = new ej.base.Ajax('/lib/scheduler/localization/pl.json', 'GET', true);
        ajax.onSuccess = function (value) {
                //Assigning locale text value for Essential JS 2 components
                ej.base.L10n.load(value);
            };
        ajax.send();
        var EmployeeIds = [];
        var colors = ["#aa1155", "#ffee88", "#dd1155","#00cc99","#e6af2e","#CA7DF9","#724CF9","#5da271","#",];
        var dataSources = [];
        var i = 1;
        @for(var i = 0; i<Model.EmployeeIds.Count();i++) {
            @: var temp = { EmployeeText: "@Model.EmployeeFullNames[i]", Id: "@Model.EmployeeIds[i]", EmployeeColor: "#275dad" };
            @: dataSources.push(temp);
         }
        ej.schedule.Schedule.Inject(ej.schedule.TimelineMonth);
        var scheduleObj = new ej.schedule.Schedule({
            views: ['TimelineMonth'],
            height: '550px',
            currentView: 'TimelineMonth',
            locale: 'pl',
            minDate: "@String.Format("{0}, {1}, {2}",Model.DateFrom.Year,Model.DateFrom.Month,Model.DateFrom.Day)",

            maxDate: "@String.Format("{0}, {1}, {2}",Model.DateTo.Year,Model.DateTo.Month,Model.DateTo.Day)",
            group: {
                resources: ['Employees']
            },
            resources: [{
                field: 'EmployeeId', title: 'Employee',
                name: 'Employees', allowMultiple: true,
                dataSource: dataSources,
                textField: 'EmployeeText', idField: 'Id', colorField: 'EmployeeColor'
            }],
            //eventSettings: { dataSource:  }
        });
        scheduleObj.appendTo('#Schedule');
    </script>
}
@section Head {
    <!-- Essential JS 2 Scheduler's dependent material theme -->
    <link href="~/lib/scheduler/styles/base/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/buttons/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/calendars/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/dropdowns/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/inputs/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/splitbuttons/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/lists/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/popups/material.css" rel="stylesheet" type="text/css" />
    <link href="~/lib/scheduler/styles/navigations/material.css" rel="stylesheet" type="text/css" />
    <!-- Essential JS 2 Scheduler's material theme -->
    <link href="~/lib/scheduler/styles/schedule/material.css" rel="stylesheet" type="text/css" />

}
